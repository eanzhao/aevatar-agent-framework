syntax = "proto3";

option csharp_namespace = "AIEventSourcingDemo";

import "google/protobuf/timestamp.proto";

// AI Assistant State
message AIAssistantState {
    string assistant_id = 1;
    string name = 2;
    int32 total_interactions = 3;
    double average_satisfaction = 4;
    repeated ConversationSummary conversation_history = 5;
    google.protobuf.Timestamp created_at = 6;
    google.protobuf.Timestamp last_interaction = 7;
}

// Conversation Summary
message ConversationSummary {
    string conversation_id = 1;
    string user_id = 2;
    string topic = 3;
    int32 message_count = 4;
    int32 tokens_used = 5;
    double satisfaction_score = 6;
    google.protobuf.Timestamp timestamp = 7;
}

// AI Assistant Configuration
message AIAssistantConfig {
    string personality = 1;
    repeated string capabilities = 2;
    double creativity_level = 3;
    bool enable_learning = 4;
}

// Events
message AssistantInitializedEvent {
    string assistant_id = 1;
    string name = 2;
    google.protobuf.Timestamp created_at = 3;
}

message UserMessageReceived {
    string user_id = 1;
    string message = 2;
    string conversation_id = 3;
    google.protobuf.Timestamp timestamp = 4;
}

message AssistantResponseGenerated {
    string response = 1;
    int32 tokens_used = 2;
    double confidence_score = 3;
    google.protobuf.Timestamp timestamp = 4;
}

message FeedbackReceived {
    string conversation_id = 1;
    double satisfaction_score = 2;
    string feedback_text = 3;
    google.protobuf.Timestamp timestamp = 4;
}

message ConversationCompleted {
    string conversation_id = 1;
    int32 total_messages = 2;
    int32 total_tokens = 3;
    double final_satisfaction = 4;
    google.protobuf.Timestamp timestamp = 5;
}

// Response quality analysis event
message ResponseQualityEvent {
    string response_id = 1;
    string quality = 2; // Excellent, Good, Acceptable, Poor
    bool needs_refinement = 3;
    string original_response = 4;
    google.protobuf.Timestamp timestamp = 5;
}

// Learning triggered event
message LearningTriggeredEvent {
    string conversation_id = 1;
    double satisfaction_score = 2;
    string feedback_text = 3;
    string sentiment = 4; // Positive, Negative, Neutral
    string context = 5;
    google.protobuf.Timestamp timestamp = 6;
}

// Successful pattern detected
message SuccessfulPatternEvent {
    string conversation_id = 1;
    string pattern = 2;
    double score = 3;
    google.protobuf.Timestamp timestamp = 4;
}

// Conversation analytics generated
message ConversationAnalyticsEvent {
    string conversation_id = 1;
    ConversationAnalyticsData analytics = 2;
    google.protobuf.Timestamp timestamp = 3;
}

// Analytics data structure
message ConversationAnalyticsData {
    string conversation_id = 1;
    int64 duration_seconds = 2;
    double average_response_time = 3;
    double token_efficiency = 4;
    double satisfaction_score = 5;
    double cost_estimate = 6;
}
